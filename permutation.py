def insertion(e, s):
  for i in range(len(s)+1):
    yield s[:i] + [e] + s[i:]

def perm(s):
  if s == []:
    yield []
  else:
    e, s1 = s[0], s[1:]
    for s1p in perm(s1):
      print('S1P: ', s1p)
      for p in insertion(e, s1p):
        yield p

for p in perm([1,2,3,4]): print(p)

"""Output"""
# S1P:  []
# S1P:  [4]
# S1P:  [3, 4]
# S1P:  [2, 3, 4]
# [1, 2, 3, 4]
# [2, 1, 3, 4]
# [2, 3, 1, 4]
# [2, 3, 4, 1]
# S1P:  [3, 2, 4]
# [1, 3, 2, 4]
# [3, 1, 2, 4]
# [3, 2, 1, 4]
# [3, 2, 4, 1]
# S1P:  [3, 4, 2]
# [1, 3, 4, 2]
# [3, 1, 4, 2]
# [3, 4, 1, 2]
# [3, 4, 2, 1]
# S1P:  [4, 3]
# S1P:  [2, 4, 3]
# [1, 2, 4, 3]
# [2, 1, 4, 3]
# [2, 4, 1, 3]
# [2, 4, 3, 1]
# S1P:  [4, 2, 3]
# [1, 4, 2, 3]
# [4, 1, 2, 3]
# [4, 2, 1, 3]
# [4, 2, 3, 1]
# S1P:  [4, 3, 2]
# [1, 4, 3, 2]
# [4, 1, 3, 2]
# [4, 3, 1, 2]
# [4, 3, 2, 1]